== Features
* Set up Capistrano for app, including Vagrant deploy environment
* Make credentials directory, generate SSH keys, ask for user password(s)
* Let Rails apps mention Ubuntu packages to install

== Security
* SSH key for app user - authorized_keys for deploy user(s)
* Additional authorized SSH keys locally, public portion only
* ~/.ssh/authorized_keys - mode 0600
* add repository to list of known hosts? Or otherwise support secure Git checkout?
* Agent forwarding for Git checkout (see Capistrano) - needed to avoid passphraseless keys
* Figure out password stuff for app user

== Security to Mention in Book
* http://stackoverflow.com/questions/14715678/vagrant-insecure-by-default

== Vagrant user security
Problem with vagrant/vagrant and root/vagrant and default SSH key:
https://docs.vagrantup.com/v2/vagrantfile/ssh_settings.html
http://stackoverflow.com/questions/14715678/vagrant-insecure-by-default/14719184
VAGRANTFILE_API_VERSION = "2"

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

# ...

  config.ssh.shell = "bash -c 'BASH_ENV=/etc/profile exec bash'" # avoids 'stdin: is not a tty' error.

  config.ssh.private_key_path = ["#{ENV['HOME']}/.ssh/id_rsa","#{ENV['HOME']}/.vagrant.d/insecure_private_key"]

  config.vm.provision "shell", inline: <<-SCRIPT
    printf "%s\n" "#{File.read("#{ENV['HOME']}/.ssh/id_rsa.pub")}" > /home/vagrant/.ssh/authorized_keys
    chown -R vagrant:vagrant /home/vagrant/.ssh
  SCRIPT
end

== Fun Ideas
* Clone dotfiles into home dir of app users - easy poking around

== Windows
* http://corlewsolutions.com/articles/article-11-guide-to-setting-up-ssh-on-windows-7
* http://corlewsolutions.com/articles/article-10-how-to-deploy-rails-applications-using-capistrano-3-1-and-windows-7
* Examine: https://github.com/SciMed/capistrano-windows-server
