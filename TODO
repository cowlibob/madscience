== Features
* Let Rails apps mention Ubuntu packages to install
* Env-specific JSON files, load and merge in Chef and Cap

== Correctness
* After new Capistrano deploy, make sure static content is properly updated. If not, restart NGinX on deploy

== Security
* Support secure Git checkouts. Test w/ private repo
* Agent forwarding for Git checkout (see Capistrano) - avoids passphraseless key requirement
* Set app user system password at all? If so, do from ~/.deploy_credentials
* Non-root MySQL for app user, root MySQL only for migrations
** Needs to set up user security when creating tables. Reasonable?
* Vagrant user security - fix before real deploy!

== Security to Mention in Book
* http://stackoverflow.com/questions/14715678/vagrant-insecure-by-default

== Vagrant user security
Problem with vagrant/vagrant and root/vagrant and default SSH key:
https://docs.vagrantup.com/v2/vagrantfile/ssh_settings.html
http://stackoverflow.com/questions/14715678/vagrant-insecure-by-default/14719184
VAGRANTFILE_API_VERSION = "2"

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

# ...

  config.ssh.private_key_path = ["#{ENV['HOME']}/.ssh/id_rsa","#{ENV['HOME']}/.vagrant.d/insecure_private_key"]

  config.vm.provision "shell", inline: <<-SCRIPT
    printf "%s\n" "#{File.read("#{ENV['HOME']}/.ssh/id_rsa.pub")}" > /home/vagrant/.ssh/authorized_keys
    chown -R vagrant:vagrant /home/vagrant/.ssh
  SCRIPT
end

== Fun Ideas
* Clone dotfiles into home dir of app users - easy poking around

== Windows
* http://corlewsolutions.com/articles/article-11-guide-to-setting-up-ssh-on-windows-7
* http://corlewsolutions.com/articles/article-10-how-to-deploy-rails-applications-using-capistrano-3-1-and-windows-7
* Examine: https://github.com/SciMed/capistrano-windows-server
